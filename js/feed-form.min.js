const feedLink=document.querySelector(".feed-link"),feedPopup=document.querySelector(".modal-feed"),feedClose=feedPopup.querySelector(".modal-close"),feedForm=feedPopup.querySelector(".feed-form"),feedInputName=feedPopup.querySelector(".feed-input-name"),feedInputEmail=feedPopup.querySelector(".feed-input-email"),overlay=document.querySelector(".overlay");let isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("feed-name"),storageEmail=localStorage.getItem("feed-email")}catch(e){isStorageSupport=!1}feedLink.addEventListener("click",function(e){e.preventDefault(),feedPopup.classList.add("modal-show"),overlay.classList.add("overlay-show"),storageName&&storageEmail?(feedInputName.value=storageName,feedInputEmail.value=storageEmail):feedInputName.focus()}),feedClose.addEventListener("click",function(e){e.preventDefault(),feedPopup.classList.remove("modal-show"),overlay.classList.remove("overlay-show"),feedPopup.classList.remove("modal-error")}),feedForm.addEventListener("submit",function(e){feedInputName.value&&feedInputEmail.value&&feedInputEmail.checkValidity()?isStorageSupport&&(localStorage.setItem("feed-name",feedInputName.value),localStorage.setItem("feed-email",feedInputName.value)):(e.preventDefault(),feedPopup.classList.remove("modal-error"),feedPopup.offsetWidth=feedPopup.offsetWidth,feedPopup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&feedPopup.classList.contains("modal-show")&&(e.preventDefault(),feedPopup.classList.remove("modal-show"),feedPopup.classList.remove("modal-error"))});
